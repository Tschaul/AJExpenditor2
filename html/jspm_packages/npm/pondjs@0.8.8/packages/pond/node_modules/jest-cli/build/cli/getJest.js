/* */ 
(function(process) {
  'use strict';
  const path = require('path');
  const chalk = require('../../../chalk/index');
  const fs = require('../../../graceful-fs/graceful-fs');
  function getJest(packageRoot) {
    const packageJSONPath = path.join(packageRoot, 'package.json');
    const binPath = path.join(packageRoot, 'node_modules/jest-cli');
    if (fs.existsSync(binPath)) {
      return require(binPath);
    } else {
      const jest = require('../jest');
      if (fs.existsSync(packageJSONPath)) {
        const packageJSON = require(packageJSONPath);
        const dependencies = packageJSON.dependencies;
        const devDependencies = packageJSON.devDependencies;
        if (dependencies && dependencies['jest-cli'] || devDependencies && devDependencies['jest-cli']) {
          process.on('exit', () => console.log(chalk.red('Please run `npm install` to use the version of Jest intended ' + 'for this project.')));
        }
      }
      return jest;
    }
  }
  module.exports = getJest;
})(require('process'));
