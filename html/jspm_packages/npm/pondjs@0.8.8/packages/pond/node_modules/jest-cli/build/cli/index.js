/* */ 
(function(process) {
  'use strict';
  var _require = require('../../../jest-util/build/index');
  const validateCLIOptions = _require.validateCLIOptions;
  const yargs = require('../../../yargs/index');
  const args = require('./args');
  const getJest = require('./getJest');
  const runCLI = require('./runCLI');
  function run(argv, project) {
    argv = yargs(argv || process.argv.slice(2)).usage(args.usage).help().alias('help', 'h').options(args.options).epilogue(args.docs).check(args.check).argv;
    validateCLIOptions(argv, args.options);
    if (!project) {
      project = process.cwd();
    }
    if (!argv.projects) {
      argv.projects = [project];
    }
    const execute = argv.projects.length === 1 ? getJest(project).runCLI : runCLI;
    execute(argv, argv.projects, (result) => {
      const code = !result || result.success ? 0 : 1;
      process.on('exit', () => process.exit(code));
      if (argv && argv.forceExit) {
        process.exit(code);
      }
    });
  }
  exports.run = run;
  exports.runCLI = runCLI;
})(require('process'));
