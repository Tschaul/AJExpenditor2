/* */ 
(function(process) {
  'use strict';
  const childProcess = require('child_process'),
      childModule = require.resolve('./child/index');
  function fork(forkModule) {
    let filteredArgs = process.execArgv.filter(function(v) {
      return !(/^--(debug|inspect)/).test(v);
    }),
        child = childProcess.fork(childModule, {execArgv: filteredArgs}, {
          env: process.env,
          cwd: process.cwd()
        });
    child.send({module: forkModule});
    return {
      send: function(data) {
        try {
          child.send(data);
        } catch (e) {}
      },
      child: child
    };
  }
  module.exports = fork;
})(require('process'));
