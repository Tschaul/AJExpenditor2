/* */ 
(function(process) {
  'use strict';
  var path = require('path');
  var fs = require('../graceful-fs/graceful-fs');
  var stripBom = require('../strip-bom/index');
  var parseJson = require('../parse-json/index');
  var Promise = require('../pinkie-promise/index');
  var pify = require('../pify/index');
  function parse(x, fp) {
    return parseJson(stripBom(x), path.relative(process.cwd(), fp));
  }
  module.exports = function(fp) {
    return pify(fs.readFile, Promise)(fp, 'utf8').then(function(data) {
      return parse(data, fp);
    });
  };
  module.exports.sync = function(fp) {
    return parse(fs.readFileSync(fp, 'utf8'), fp);
  };
})(require('process'));
